<div id="menu-container">
    <button id="menu-button">☰ Filter Columns</button>

    <div id="filter-menu" class="filter-menu">
        <label>Afficher : </label>

        <!-- ✅ Checkbox All -->
        <label>
            <input type="checkbox" id="toggle-all-columns" checked>
            <b>Toutes les colonnes</b>
        </label>
        <hr>
        
        <label><input type="checkbox" class="toggle-column" data-column="0" checked> Selection</label>
        <label><input type="checkbox" class="toggle-column" data-column="1" checked> ID</label>
        <label><input type="checkbox" class="toggle-column" data-column="2" checked> Name</label>
        <label><input type="checkbox" class="toggle-column" data-column="3" checked> Date</label>
        <label><input type="checkbox" class="toggle-column" data-column="4" checked> Specie</label>
        <label><input type="checkbox" class="toggle-column" data-column="5" checked> Gender</label>
        <label><input type="checkbox" class="toggle-column" data-column="6" checked> Sample</label>
        <label><input type="checkbox" class="toggle-column" data-column="7" checked> Genotype</label>
        <label><input type="checkbox" class="toggle-column" data-column="8" checked> Plasmyd</label>
        <label><input type="checkbox" class="toggle-column" data-column="9" checked> Storage</label>
        <label><input type="checkbox" class="toggle-column" data-column="10" checked> Parent</label>
        <label><input type="checkbox" class="toggle-column" data-column="11" checked> Project</label>
        <label><input type="checkbox" class="toggle-column" data-column="12" checked> Collection</label>
        <label><input type="checkbox" class="toggle-column" data-column="13" checked> Drug Resistance</label>
        <label><input type="checkbox" class="toggle-column" data-column="14" checked> Transformability</label>
        <label><input type="checkbox" class="toggle-column" data-column="15" checked> File Sequencing</label>
        <label><input type="checkbox" class="toggle-column" data-column="16" checked> Publication</label>
        <label><input type="checkbox" class="toggle-column" data-column="17" checked> Creator</label>
        <label><input type="checkbox" class="toggle-column" data-column="18" checked> Description</label>
        <label><input type="checkbox" class="toggle-column" data-column="19" checked> Comment</label>
        {# Les colonnes d'action (Duplicate, Modifie, x) ne sont pas incluses dans les toggles par défaut #}
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const toggleAll = document.getElementById('toggle-all-columns');

    function setAllCheckboxes(state) {
        document.querySelectorAll('.toggle-column').forEach(cb => {
            if (cb.checked !== state) {
                cb.checked = state;
                cb.dispatchEvent(new Event('change'));
            }
        });
    }

    // Clic sur "Toutes les colonnes" => coche/décoche toutes
    toggleAll.addEventListener('change', function() {
        setAllCheckboxes(toggleAll.checked);
    });

    // Synchronise la case "Toutes les colonnes" selon l'état de chaque colonne
    document.querySelectorAll('.toggle-column').forEach(cb => {
        cb.addEventListener('change', function() {
            const allChecked = Array.from(document.querySelectorAll('.toggle-column')).every(c => c.checked);
            toggleAll.checked = allChecked;
        });
    });
});
</script>
